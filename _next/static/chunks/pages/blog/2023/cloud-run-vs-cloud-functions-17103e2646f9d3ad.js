(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76],{9510:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/2023/cloud-run-vs-cloud-functions",function(){return s(7390)}])},8109:function(e){e.exports={navIcon:"ExternalLink_navIcon__jySiY",externalIcon:"ExternalLink_externalIcon__n4ki_"}},7390:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return r}});var t=s(5893);s(7294);var i=s(7037),o=s(4187);function r(){return(0,t.jsxs)(i.Z,{title:"Cloud run vs cloud functions",createdAt:"2023-04-11T11:35:24.000Z",tags:"technology",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)(o.Z,{href:"https://cloud.google.com/run",text:"Cloud Run",externalIcon:!0})," ","and"," ",(0,t.jsx)(o.Z,{href:"https://cloud.google.com/functions",text:"Cloud Function",externalIcon:!0})," ","are two comparable cloud computing services offered by"," ",(0,t.jsx)(o.Z,{href:"https://cloud.google.com",text:"Google Cloud Platform",externalIcon:!0}),". When I first started using GCP, the"," ",(0,t.jsx)(o.Z,{href:"https://cloud.google.com/appengine",text:"App Engine",externalIcon:!0})," ","platform was being replaced by Cloud Run. So I initially used Cloud Run to build a lot of services. Over time, I also started to utilize Cloud Functions, primarily for responding to Pub/Sub messages."]}),(0,t.jsx)("p",{children:"I have a personal preference for Cloud Run after using both technologies. I'll try to explain what kinds of use cases these technologies are most suited for."}),(0,t.jsx)("h4",{children:"Cloud Functions"}),(0,t.jsx)("p",{children:"It's a very nice piece of technology. Recently, I sent notifications to a certain chat group using Cloud Functions. Messages were being generated by various services and pushed to Cloud Pub/Sub topics. A Cloud Function would be started via a Cloud Pub/Sub subscription, which would then transmit those messages to a chat room."}),(0,t.jsx)("p",{children:"Use Cloud Functions, in my opinion, when :-"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Simple and self-contained task. It can be so basic that there won't be any tests."}),(0,t.jsx)("li",{children:"The task will be carried out irregularly and a variable number of times."}),(0,t.jsx)("li",{children:"There won't be many updates to the task."})]}),(0,t.jsx)("h4",{children:"What was the issue?"}),(0,t.jsx)("p",{children:"As we are discussing Google Cloud Platform, I think I will explain various issues I faced in that regard. As there are similar offerings from other providers, I think this discussion may not apply to them."}),(0,t.jsx)("p",{children:"In the previous section, I laid out some use cases for Cloud Functions. So you understand, for Cloud Functions, I am advocating for use cases that don't change very often. This is mainly because of three reasons."}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"There is zero flexibility in image production. You always end up with a large image that is roughly 300 MB or more in size as a price for simplicity."}),(0,t.jsx)("li",{children:"Deployment times are incredibly lengthy as compared to Cloud Run. You might have to wait for 2 to 5 minutes only to deploy."}),(0,t.jsx)("li",{children:"My deployments tends to be inexpensive, and Cloud Function will maintain a minimum of two versions at once. This adds to the cost of Cloud Storage."})]}),(0,t.jsx)("h4",{children:"Cloud Run"}),(0,t.jsx)("p",{children:'This innovation was provided as an App Engine upgrade. It can be described as "Managed Kubernetes". Web services benefit most from this. Everything else will be taken care of for you; all you have to do is design a container for your web service.'}),(0,t.jsx)("p",{children:"Most of my services are running on top of Cloud Run. I will now lay out some use cases for this technology."}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Web service like Next.JS, Express.JS, GraphQL or TRPC servers"}),(0,t.jsx)("li",{children:"Any code that can be exposed as a web service through container"})]}),(0,t.jsx)("p",{children:"Now let's discuss what the major plus points are for Cloud Run."}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"You get full control over the image generation process. Some of my production backend services are just around 60 MB."}),(0,t.jsx)("li",{children:"Although a pre-GA offering, the Cloud Run service can be linked to a domain (or subdomain) really easily."}),(0,t.jsx)("li",{children:"After deployment, you can delete the Cloud Run image, as the latest revision keeps an internal copy of your container."}),(0,t.jsx)("li",{children:"There is a nice free tier offered with Cloud Run (something similar is available with Cloud Functions)."}),(0,t.jsx)("li",{children:"Cloud Build based deployment takes less time than Cloud Functions."})]}),(0,t.jsx)("p",{children:"So if your service can be wrapped as a container and it is handling serious production logic, I would recommend Cloud Run instead of Cloud Functions."})]})}},4187:function(e,n,s){"use strict";var t=s(5893),i=s(7294),o=s(4184),r=s(5154),a=s(8109);let l={envelope:r.SRX,linkedin:r.ltd,github:r.hJX},c=e=>{let{children:n,className:s,href:c,text:u,icon:d,externalIcon:h}=e;return(0,t.jsxs)("a",{className:o(s),href:c,target:"_blank",children:[d&&i.createElement(l[d],{className:o("me-1",a.navIcon)}),n,u&&(0,t.jsx)("span",{className:"me-1",children:u}),h&&(0,t.jsx)(r.CkN,{className:a.externalIcon})]})};n.Z=c},7037:function(e,n,s){"use strict";s.d(n,{Z:function(){return p}});var t=s(5893),i=s(7294),o=s(2962),r=s(3944),a=s(1163),l=s(3197),c=s(4217),u=s(2891),d=s(794);function h(e){let{date:n}=e;return(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"badge bg-info me-2 p-2 text-uppercase",children:"Posted on "}),(0,t.jsx)("span",{className:"badge bg-secondary me-2 p-2",children:new Date(n).toDateString()})]})}var m=s(5154);function p(e){let{children:n,title:s,createdAt:p}=e,{asPath:x}=(0,a.useRouter)(),f=i.useRef(null),g=i.useRef(null),j=e=>{e.current&&e.current.scrollIntoView({behavior:"smooth",block:"start"})};return s=u(s),(0,t.jsxs)(d.Z,{title:s,children:[(0,t.jsx)(o.dX,{url:"https://sushantdhiman.com".concat(x),type:"BlogPosting",title:s,datePublished:p,authorName:"Sushant Dhiman"}),(0,t.jsxs)("div",{ref:g,children:[(0,t.jsx)("span",{className:"float-start",children:(0,t.jsx)(h,{date:p})}),(0,t.jsx)("span",{className:"float-end",children:(0,t.jsxs)(l.Z,{children:[(0,t.jsx)(c.Z,{onClick:()=>a.Router.push("/blog"),size:"sm",variant:"primary",children:(0,t.jsx)(m.x_l,{})}),(0,t.jsx)(c.Z,{onClick:()=>j(f),size:"sm",variant:"primary",children:(0,t.jsx)(m.NWQ,{})})]})}),(0,t.jsx)("span",{className:"clearfix"})]}),(0,t.jsx)("br",{}),n,(0,t.jsx)("br",{ref:f}),(0,t.jsx)(c.Z,{onClick:()=>j(g),variant:"primary",size:"sm",children:(0,t.jsx)(m.ZTc,{})}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),(0,t.jsx)(r.qw,{shortname:"sushantdhiman-github-io",config:{title:s}})]})}},794:function(e,n,s){"use strict";s.d(n,{Z:function(){return a}});var t=s(5893);s(7294);var i=s(4184),o=s(9008),r=s(2891);function a(e){let{title:n,headTitle:s,children:a,className:l}=e;return(0,t.jsxs)("div",{className:i("my-3",l),children:[(0,t.jsx)(o,{children:(0,t.jsx)("title",{children:"".concat(r(s||n)," | Sushant Dhiman")})}),n&&(0,t.jsx)("h1",{className:"my-5 text-center text-primary",children:r(n)}),a]})}}},function(e){e.O(0,[766,774,888,179],function(){return e(e.s=9510)}),_N_E=e.O()}]);