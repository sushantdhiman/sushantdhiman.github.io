<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Sushant Dhiman | Continuous Deployment of Google Cloud Functions Written with TypeScript</title><meta name="next-head-count" content="3"/><link rel="icon" href="/favicon.ico"/><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5521774148060332" crossorigin="anonymous"></script><link rel="preload" href="/_next/static/css/02ce8bb1af7fae3d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/02ce8bb1af7fae3d.css" data-n-g=""/><link rel="preload" href="/_next/static/css/159c6448cd08759d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/159c6448cd08759d.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-e70c6273bfe3f237.js" defer=""></script><script src="/_next/static/chunks/main-0ceb493b3d4aefb7.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a45d1b10a0094a61.js" defer=""></script><script src="/_next/static/chunks/735-6e7e194d2c2a27e9.js" defer=""></script><script src="/_next/static/chunks/671-a8b77028c41d3490.js" defer=""></script><script src="/_next/static/chunks/675-e6fe569aa6ce6471.js" defer=""></script><script src="/_next/static/chunks/pages/blog/2022/continuous-deployment-of-google-cloud-functions-written-with-typescript-f8e99e25f3283b3b.js" defer=""></script><script src="/_next/static/pV3RSL7c_tBHFSsRlYgv4/_buildManifest.js" defer=""></script><script src="/_next/static/pV3RSL7c_tBHFSsRlYgv4/_ssgManifest.js" defer=""></script><script src="/_next/static/pV3RSL7c_tBHFSsRlYgv4/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div><nav class="container-fluid navbar navbar-expand-md navbar-dark bg-primary"><div class="container-md"><span class="Navigation_brand__5433m navbar-brand"><span>Sushant Dhiman</span></span><button aria-label="Toggle navigation" type="button" class="navbar-toggler"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse"><ul class="Navigation_navbar__0TE08 me-auto navbar-nav"><li class="nav-item"><a href="/" class="nav-link">Home</a></li><li class="nav-item"><a href="/blog" class="active nav-link">Blog</a></li><li class="nav-item"><a href="/projects" class="nav-link">Projects</a></li><li class="nav-item"><a href="/about" class="nav-link">About</a></li></ul><ul class="Navigation_navbar__0TE08 ms-auto flex-row navbar-nav"><li class="nav-item"><a class="px-2 nav-link" href="mailto:sushantdhiman@outlook.com" target="_blank"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope me-1 ExternalLink_icon__6OvgU" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M464 64C490.5 64 512 85.49 512 112C512 127.1 504.9 141.3 492.8 150.4L275.2 313.6C263.8 322.1 248.2 322.1 236.8 313.6L19.2 150.4C7.113 141.3 0 127.1 0 112C0 85.49 21.49 64 48 64H464zM217.6 339.2C240.4 356.3 271.6 356.3 294.4 339.2L512 176V384C512 419.3 483.3 448 448 448H64C28.65 448 0 419.3 0 384V176L217.6 339.2z"></path></svg></a></li><li class="nav-item"><a class="px-2 nav-link" href="https://linkedin.com/in/sushantdhiman" target="_blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin me-1 ExternalLink_icon__6OvgU" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></li><li class="nav-item"><a class="px-2 nav-link" href="https://gitlab.com/sushantdhiman" target="_blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="gitlab" class="svg-inline--fa fa-gitlab me-1 ExternalLink_icon__6OvgU" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M510.5 284.5l-27.26-83.96c.012 .038 .016 .077 .028 .115-.013-.044-.021-.088-.033-.132v-.01L429.1 33.87a21.33 21.33 0 0 0 -20.44-14.6A21.04 21.04 0 0 0 388.5 34L337.1 192.2H175L123.5 33.99A21.03 21.03 0 0 0 103.3 19.27h-.113A21.47 21.47 0 0 0 82.86 34L28.89 200.5l-.008 .021v0c-.013 .042-.019 .084-.033 .127 .012-.038 .017-.077 .029-.115L1.514 284.5a30.6 30.6 0 0 0 11.12 34.28L248.9 490.4c.035 .026 .074 .041 .109 .067 .1 .072 .2 .146 .3 .214-.1-.065-.187-.136-.282-.2l0 0c.015 .012 .033 .02 .05 .031s.027 .015 .041 .024l.006 0a11.99 11.99 0 0 0 1.137 .7c.054 .03 .1 .068 .157 .1l0 0c.033 .016 .064 .038 .1 .054s.053 .02 .077 .032 .038 .015 .056 .023c.044 .021 .092 .034 .136 .057 .205 .1 .421 .178 .633 .264 .2 .082 .389 .177 .592 .248l.025 .011c.034 .012 .064 .028 .1 .04s.083 .032 .125 .046l.05 .012c.053 .016 .11 .024 .163 .039 .019 .006 .042 .009 .063 .015 .284 .086 .579 .148 .872 .213 .115 .026 .225 .062 .341 .083 .017 0 .032 .009 .05 .012 .038 .008 .073 .021 .112 .027 .062 .011 .122 .031 .186 .04 .049 .007 .1 0 .151 .012h.033a11.92 11.92 0 0 0 1.7 .136h.019a11.97 11.97 0 0 0 1.7-.136h.033c.05-.008 .1 0 .153-.012s.124-.029 .187-.04c.038-.006 .073-.019 .11-.027 .017 0 .032-.009 .049-.012 .118-.023 .231-.059 .349-.084 .288-.064 .578-.126 .861-.21 .019-.006 .039-.008 .059-.014 .055-.017 .113-.024 .169-.041 .016-.006 .035-.007 .051-.012 .044-.013 .086-.032 .129-.047s.063-.028 .1-.041l.026-.01c.214-.076 .417-.175 .627-.261s.394-.154 .584-.245c.047-.023 .1-.036 .142-.059 .018-.009 .04-.015 .058-.024s.053-.02 .078-.033 .068-.04 .1-.056l0 0c.056-.028 .106-.069 .161-.1a12.34 12.34 0 0 0 1.132-.695c.029-.02 .062-.035 .092-.056 .008-.006 .017-.009 .024-.015 .035-.026 .076-.043 .11-.068l236.3-171.7A30.6 30.6 0 0 0 510.5 284.5zM408.8 49.48l46.34 142.7H362.5zm-305.6 0 46.43 142.7H56.95zM26.82 299.3a6.526 6.526 0 0 1 -2.361-7.308l20.34-62.42L193.8 420.6zm38.24-82.97h92.41L223.4 419.2zm183.4 273.8c-.047-.038-.092-.079-.138-.118-.009-.008-.018-.018-.028-.026-.091-.075-.18-.152-.268-.231-.172-.15-.341-.3-.5-.462 .014 .012 .029 .022 .043 .035l.055 .046a12.19 12.19 0 0 0 1.091 .929l.012 .011c.018 .013 .033 .03 .051 .045C248.7 490.3 248.6 490.2 248.5 490.1zm7.514-48.48L217.2 322.2 182.8 216.3H329.3zm7.935 48.11c-.091 .079-.178 .157-.27 .233l-.032 .028c-.047 .038-.091 .079-.136 .117-.1 .08-.209 .152-.313 .229 .018-.013 .033-.032 .053-.044l.009-.009a11.69 11.69 0 0 0 1.086-.926c.014-.013 .03-.024 .044-.036s.038-.03 .054-.047C264.3 489.4 264.1 489.6 263.9 489.7zm90.7-273.5h92.4l-18.91 24.23-139.5 178.7zm130.6 82.97L318.2 420.6 467.3 229.5l20.26 62.39A6.528 6.528 0 0 1 485.2 299.2z"></path></svg></a></li><li class="nav-item"><a class="px-2 nav-link" href="https://github.com/sushantdhiman" target="_blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github me-1 ExternalLink_icon__6OvgU" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li></ul></div></div></nav><div class="container-md"><div class="my-3"><h2 class="my-3 text-center text-primary">Continuous Deployment of Google Cloud Functions Written with TypeScript</h2><div><span class="float-start"><span><span class="badge bg-info me-2 p-2 text-uppercase">Posted on </span><span class="text-success">Wed Jun 08 2022</span></span></span><span class="float-end"><div role="group" class="btn-group"><button type="button" variant="primary" class="btn btn-secondary btn-sm"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-left" class="svg-inline--fa fa-arrow-left " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M447.1 256C447.1 273.7 433.7 288 416 288H109.3l105.4 105.4c12.5 12.5 12.5 32.75 0 45.25C208.4 444.9 200.2 448 192 448s-16.38-3.125-22.62-9.375l-160-160c-12.5-12.5-12.5-32.75 0-45.25l160-160c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25L109.3 224H416C433.7 224 447.1 238.3 447.1 256z"></path></svg></button><button type="button" variant="primary" class="btn btn-secondary btn-sm"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-down" class="svg-inline--fa fa-arrow-down " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M374.6 310.6l-160 160C208.4 476.9 200.2 480 192 480s-16.38-3.125-22.62-9.375l-160-160c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 370.8V64c0-17.69 14.33-31.1 31.1-31.1S224 46.31 224 64v306.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0S387.1 298.1 374.6 310.6z"></path></svg></button></div></span><span class="clearfix"></span></div><br/><h4>Introduction</h4><p>Recently, I was trying to continuously deploy a Google Cloud Function, triggered with Cloud Pub/Sub. But the catch was that this function was written in TypeScript. Every article I could find was either using plain JavaScript or recommending cloning the Github repository with Google Cloud Source. There was also the choice of keeping compiled code in the repository.</p><p>I was looking for a simple setup like Cloud Run, which linked to my Github repository and continuously built and deployed without any hassle. Let&#x27;s see how you can accomplish this with Cloud Build.</p><h4>Using Cloud Build</h4><p>First, you need to grant access to your Github repo to the<!-- --> <strong>Google Cloud Build</strong> Github app. This can be done in<!-- --> <a class="" href="https://github.com/settings/apps/authorizations" target="_blank"><span class="me-1">Github app authorizations section</span><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="up-right-from-square" class="svg-inline--fa fa-up-right-from-square ExternalLink_icon__6OvgU" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M384 320c-17.67 0-32 14.33-32 32v96H64V160h96c17.67 0 32-14.32 32-32s-14.33-32-32-32L64 96c-35.35 0-64 28.65-64 64V448c0 35.34 28.65 64 64 64h288c35.35 0 64-28.66 64-64v-96C416 334.3 401.7 320 384 320zM488 0H352c-12.94 0-24.62 7.797-29.56 19.75c-4.969 11.97-2.219 25.72 6.938 34.88L370.8 96L169.4 297.4c-12.5 12.5-12.5 32.75 0 45.25C175.6 348.9 183.8 352 192 352s16.38-3.125 22.62-9.375L416 141.3l41.38 41.38c9.156 9.141 22.88 11.84 34.88 6.938C504.2 184.6 512 172.9 512 160V24C512 10.74 501.3 0 488 0z"></path></svg></a>.</p><p>The next step will be to create a <strong>Cloud Build Trigger</strong>. You can find this option in<!-- --> <a class="" href="https://console.cloud.google.com/cloud-build/triggers" target="_blank"><span class="me-1">Google cloud console</span><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="up-right-from-square" class="svg-inline--fa fa-up-right-from-square ExternalLink_icon__6OvgU" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M384 320c-17.67 0-32 14.33-32 32v96H64V160h96c17.67 0 32-14.32 32-32s-14.33-32-32-32L64 96c-35.35 0-64 28.65-64 64V448c0 35.34 28.65 64 64 64h288c35.35 0 64-28.66 64-64v-96C416 334.3 401.7 320 384 320zM488 0H352c-12.94 0-24.62 7.797-29.56 19.75c-4.969 11.97-2.219 25.72 6.938 34.88L370.8 96L169.4 297.4c-12.5 12.5-12.5 32.75 0 45.25C175.6 348.9 183.8 352 192 352s16.38-3.125 22.62-9.375L416 141.3l41.38 41.38c9.156 9.141 22.88 11.84 34.88 6.938C504.2 184.6 512 172.9 512 160V24C512 10.74 501.3 0 488 0z"></path></svg></a>.</p><p>Configure the cloud build to your liking. Set the<!-- --> <strong>Source</strong> to your Github repository.</p><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27699%27%20height=%27254%27/%3e"/></span><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img src="/media/2022/june/1.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span><p>Next, we need to define what to do when the repository is updated. This can be defined in different ways, but I have selected the<!-- --> <strong>Inline cloud build configuration YAML</strong> option.</p><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27583%27%20height=%27485%27/%3e"/></span><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img src="/media/2022/june/2.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span><p>Now click on <strong>Open Editor</strong> to change the configuration YAML file. I am giving the code below directly, then I will explain what is happening.</p><pre style="display:block;overflow-x:auto;padding:0.5em;background:#444;color:#ddd"><code class="language-yaml" style="white-space:pre"><span class="hljs-attr">steps:</span><span>
</span><span>  </span><span style="color:#d88">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#d88">&#x27;node:16-slim&#x27;</span><span>
</span><span>    </span><span class="hljs-attr">args:</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">&#x27;-c&#x27;</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">|
</span><span style="color:#d88">        npm ci &amp;&amp;
</span><span style="color:#d88">        npm run build &amp;&amp;
</span><span style="color:#d88">        mkdir -p /workspace/dist &amp;&amp;
</span><span style="color:#d88">        cp package.json /workspace/dist/package.json &amp;&amp;
</span><span style="color:#d88">        cp -r lib /workspace/dist
</span><span style="color:#d88"></span><span>    </span><span class="hljs-attr">entrypoint:</span><span> </span><span style="color:#d88">bash</span><span>
</span><span>  </span><span style="color:#d88">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#d88">gcr.io/cloud-builders/gcloud-slim</span><span>
</span><span>    </span><span class="hljs-attr">args:</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">functions</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">deploy</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">&lt;function_name&gt;</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">&#x27;--region&#x27;</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">asia-south2</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">&#x27;--trigger-topic&#x27;</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">&lt;pub_sub_topic_name&gt;</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">&#x27;--timeout&#x27;</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">10s</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">&#x27;--memory&#x27;</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">128mb</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">&#x27;--runtime&#x27;</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">nodejs16</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">&#x27;--entry-point&#x27;</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">&lt;entrypoint_name&gt;</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">&#x27;--max-instances&#x27;</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">&#x27;2&#x27;</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">&#x27;--source&#x27;</span><span>
</span><span>      </span><span style="color:#d88">-</span><span> </span><span style="color:#d88">/workspace/dist</span><span>
</span></code></pre><p>In the first step, we are using the Node 16 image to install node dependencies, then building the repository using<!-- --> <code>npm run build</code>. The main point to note here is that we are copying built artifacts to the <code>/workspace/dist</code> directory.</p><p><code>/workspace</code> is a special path in Cloud Build, where different steps can keep files to share with other steps.</p><p>In the second step, we are using gcloud to deploy our function from the<!-- --> <code>/workspace/dist</code> directory, with the <code>--source</code> <!-- -->flag. Other options can be configured to meet the needs of your function.</p><p>Finally, save this build trigger. Now you will have a continuously deployed cloud function written in TypeScript.</p><br/><button type="button" variant="primary" class="btn btn-secondary btn-sm"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-up" class="svg-inline--fa fa-arrow-up " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M374.6 246.6C368.4 252.9 360.2 256 352 256s-16.38-3.125-22.62-9.375L224 141.3V448c0 17.69-14.33 31.1-31.1 31.1S160 465.7 160 448V141.3L54.63 246.6c-12.5 12.5-32.75 12.5-45.25 0s-12.5-32.75 0-45.25l160-160c12.5-12.5 32.75-12.5 45.25 0l160 160C387.1 213.9 387.1 234.1 374.6 246.6z"></path></svg></button><br/><br/><div class="row"><div class="row"><div class="text-center text-white fw-bold fs-5 bg-primary col">Sponsors</div></div><div class="my-2 row"><div class="mb-lg-0 mb-3 col-md-12 col-lg-6"><a href="https://avrodh.com?utm_source=sdblog&amp;utm_medium=banner" target="_blank" class="pointer"><div class="card"><div class="g-0 row"><div class="text-center col-4"><img src="/avrodh_icon.png" alt="Product logo" class="Adverts_product_logo__Iw6ik card-img"/></div><div class="align-items-center d-flex col-8"><div class="card-body"><h5>Avrodh: Privacy Focused Site Blocker</h5></div></div></div></div></a></div></div><div class="row"><div class="text-center text-white py-1 bg-primary col">Get in touch to show your product here</div></div></div><div id="disqus_thread"></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/2022/continuous-deployment-of-google-cloud-functions-written-with-typescript","query":{},"buildId":"pV3RSL7c_tBHFSsRlYgv4","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>